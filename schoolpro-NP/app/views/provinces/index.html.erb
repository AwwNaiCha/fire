<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDB06c3JC9Puup5N4gk3cK1j9sQ0kO615U&sensor=false"></script>
  <style type="text/css">
    #mapDiv {
      width: 1400px;
      height: 800px;
    }

  </style>

  <script type="text/javascript">
    var map;
	var parklocs = '<%= @locations.to_json %>'
	var parklocs = JSON.parse(parklocs.replace(/&quot;/g,'"'));;
	//console.log(parklocs);
	
	
    function initMap() {
      google.maps.visualRefresh = true;

      var mapOptions = {
        zoom: 1,
        mapTypeControlOptions: {mapTypeIds:
            [google.maps.MapTypeId.ROADMAP]}
      };

      var mapElement = document.getElementById('mapDiv');
      map = new google.maps.Map(mapElement, mapOptions);
      map.setMapTypeId(google.maps.MapTypeId.ROADMAP);

      //Load GeoJSON
      //map.data.loadGeoJson("<%= provinces_path format: :json -%>");
      map.data.loadGeoJson("/parks.json");
	  
      map.setZoom(5);
      var gabon = new google.maps.LatLng(38.4230, -95.9717);
      map.setCenter(gabon);

      //Create an info box for displaying names
      var infoBox = document.createElement('div');
      infoBox.innerHTML = "<div id='info-box'></div>";
      map.controls[google.maps.ControlPosition.RIGHT_TOP].push(infoBox);

      map.data.addListener('mouseover', function(event) {
        map.data.revertStyle();
        $('#info-box').text(event.feature.getProperty('name'));
        map.data.overrideStyle(event.feature, { fillColor: 'red' });

      });

      map.data.addListener('mouseout', function(event){
        map.data.revertStyle();
      });

      map.data.setStyle(function(feature) {
        return { fillColor: 'green',
          strokeWeight: 1}
      });


    }

    function zoomToUSA() {
        var istanbul = new google.maps.LatLng(38.4230, -95.9717);
		map.setZoom(5);
        map.setCenter(istanbul);
    }

    function zoomToMarks() {


		for(i = 0; i < parklocs.length; i++) {
			var myLatLng = {lat: Number(parklocs[i].latitude), lng: Number(parklocs[i].longitude)};
			var marker = new google.maps.Marker({
	     	   position: myLatLng,
	      	   map: map,
	      	   title: parklocs[i].park_name
	   	 	});
			
			
		    google.maps.event.addListener(marker, 'click', (function(marker, i) {
		         return function() {
	 	    		map.setZoom(10);
	 	    		map.setCenter(marker.getPosition());
		         }
		    })(marker, i));
		};


    }

    function disableDrag() {
      map.setOptions({draggable: false});
    }

    function setMaxZoom() {
      map.setOptions({maxZoom: 12});
    }

    function setMinZoom() {
      map.setOptions({minZoom: 5});
    }

    function changeUI() {
      map.setOptions({disableDefaultUI: true});
    }

    function disableScroll() {
      map.setOptions({scrollwheel: false});
    }

    function startButtonEvents() {
      document.getElementById('btnZoomToUSA')
          .addEventListener('click', function(){
            zoomToUSA();
          });

      document.getElementById('btnZoomToMarks')
          .addEventListener('click', function() {
            zoomToMarks();
          });

      document.getElementById('btnDisableDrag')
          .addEventListener('click', function(){
            disableDrag();
          });

      document.getElementById('btnMaxZoom')
          .addEventListener('click', function() {
            setMaxZoom();
          });
      document.getElementById('btnMinZoom')
          .addEventListener('click', function() {
            setMinZoom();
          });
      document.getElementById('btnChangeUI')
          .addEventListener('click', function() {
            changeUI();
          })
      document.getElementById('btnDisableScroll')
          .addEventListener('click', function() {
            disableScroll();
          });
    }

    google.maps.event.addDomListener(window, 'load', initMap);
    document.addEventListener('DOMContentLoaded', startButtonEvents);
	
  </script>
</head>
<body>
<<<<<<< Updated upstream
<h1>Park Map</h1>



<div>

  <input id="btnZoomToIst" type="button" class="button small" value="Zoom To Istanbul" />
  <input id="btnZoomToStr" type="button" class="button small" value="Zoom To Street Level" />
</div>
<div>
  <table>
    <tr>
      <td>
        <div id="mapDiv"/>
      </td>
    </tr>
  </table>
</div>
=======
<h1>National Parks in USA</h1>
<h2><%= @locations%></h2>
  <tbody>
    <% @locations.each do |location| %>
      <tr>
        <td>dfdf <%= location.park_name %></td>
       </tr>
    <% end %>
  </tbody>
<section id="one" class="wrapper style1">
  <div class="container 75%">
    <div class="row 200%">

      <div style="width:120px; float:left;">
        <ul>
          <li><input id="btnZoomToUSA" type="button" class="button small" value="Zoom To USA" /></li>
          <li><input id="btnZoomToMarks" type="button" class="button small" value="Zoom To Park Marks" /></li>
          <li><input id="btnDisableDrag" type="button" class="button small" value="Disable Drag" /></li>
          <li><input id="btnMaxZoom" type="button" class="button small" value="Set Max Zoom to 12" /></li>
          <li><input id="btnMinZoom" type="button" class="button small" value="Set Min Zoom to 5" /></li>
          <li> <input id="btnChangeUI" type="button" class="button small" value="Change UI" /></li>
          <li><input id="btnDisableScroll" type="button" class="button small" value="Disable Scroll Zoom" /></li>
        </ul>
      </div>
      <div style="width:1800px; float:right">
        <table>
          <tr>
            <td>
              <div id="mapDiv"/>
            </td>
          </tr>
        </table>

      </div>
    </div>
  </div>
>>>>>>> Stashed changes
</section>


</body>
</html>